{
  "version": "2.0",
  "description": "Esquema oficial de la tabla technologies en BD externa (snake_case). Fuente de verdad para mapeo de campos.",
  "last_updated": "2026-01-24",
  "tables": {
    "technologies": {
      "description": "Tabla principal de tecnologías validadas - BD externa usa snake_case",
      "fields": {
        "id": { "column": "id", "type": "uuid", "nullable": false },
        "nombre": { "column": "nombre", "type": "text", "nullable": true },
        "proveedor": { "column": "proveedor", "type": "text", "nullable": true },
        "pais": { "column": "pais", "type": "text", "nullable": true },
        "paises_actua": { "column": "paises_actua", "type": "text", "nullable": true },
        "web": { "column": "web", "type": "text", "nullable": true },
        "email": { "column": "email", "type": "text", "nullable": true },
        "descripcion": { "column": "descripcion", "type": "text", "nullable": true },
        "aplicacion": { "column": "aplicacion", "type": "text", "nullable": true },
        "ventaja": { "column": "ventaja", "type": "text", "nullable": true },
        "innovacion": { "column": "innovacion", "type": "text", "nullable": true },
        "trl": { "column": "trl", "type": "integer", "nullable": true },
        "tipo": { "column": "tipo", "type": "text", "nullable": true },
        "sector": { "column": "sector", "type": "text", "nullable": true },
        "casos_referencia": { "column": "casos_referencia", "type": "text", "nullable": true },
        "comentarios": { "column": "comentarios", "type": "text", "nullable": true },
        "fecha_scouting": { "column": "fecha_scouting", "type": "text", "nullable": true },
        "estado_seguimiento": { "column": "estado_seguimiento", "type": "text", "nullable": true },
        "categorias": { "column": "categorias", "type": "text[]", "nullable": true, "default": "'{}'::text[]" },
        "tipos": { "column": "tipos", "type": "text[]", "nullable": true, "default": "'{}'::text[]" },
        "subcategorias": { "column": "subcategorias", "type": "text[]", "nullable": true, "default": "'{}'::text[]" },
        "tipo_id": { "column": "tipo_id", "type": "integer", "nullable": true, "legacy": true },
        "subcategoria_id": { "column": "subcategoria_id", "type": "integer", "nullable": true, "legacy": true },
        "sector_id": { "column": "sector_id", "type": "varchar", "nullable": true, "legacy": true },
        "subsector_industrial": { "column": "subsector_industrial", "type": "varchar", "nullable": true },
        "status": { "column": "status", "type": "text", "nullable": true },
        "quality_score": { "column": "quality_score", "type": "integer", "nullable": true, "default": 0 },
        "review_status": { "column": "review_status", "type": "text", "nullable": true, "default": "'none'::text" },
        "review_requested_at": { "column": "review_requested_at", "type": "timestamptz", "nullable": true },
        "review_requested_by": { "column": "review_requested_by", "type": "uuid", "nullable": true },
        "reviewer_id": { "column": "reviewer_id", "type": "uuid", "nullable": true },
        "reviewed_at": { "column": "reviewed_at", "type": "timestamptz", "nullable": true },
        "approved_at": { "column": "approved_at", "type": "timestamptz", "nullable": true },
        "approved_by": { "column": "approved_by", "type": "uuid", "nullable": true },
        "created_by": { "column": "created_by", "type": "uuid", "nullable": true },
        "updated_by": { "column": "updated_by", "type": "uuid", "nullable": true },
        "created_at": { "column": "created_at", "type": "timestamptz", "nullable": true, "default": "now()" },
        "updated_at": { "column": "updated_at", "type": "timestamptz", "nullable": true, "default": "now()" },
        "version": { "column": "version", "type": "integer", "nullable": true, "default": 1 },
        "embedding": { "column": "embedding", "type": "vector", "nullable": true },
        "embedding_updated_at": { "column": "embedding_updated_at", "type": "timestamptz", "nullable": true }
      }
    },
    "scouting_queue": {
      "description": "Cola de tecnologías pendientes - USA NOMBRES CON ESPACIOS",
      "note": "Esta tabla usa columnas con espacios y acentos por compatibilidad legacy",
      "fields": {
        "id": "id",
        "nombre_tecnologia": "Nombre de la tecnología",
        "tipo_tecnologia": "Tipo de tecnología",
        "subcategoria": "Subcategoría",
        "sector_subsector": "Sector y subsector",
        "proveedor_empresa": "Proveedor / Empresa",
        "pais_origen": "País de origen",
        "paises_operacion": "Paises donde actua",
        "web_empresa": "Web de la empresa",
        "email_contacto": "Email de contacto",
        "descripcion_tecnica": "Descripción técnica breve",
        "aplicacion_principal": "Aplicación principal",
        "ventaja_competitiva": "Ventaja competitiva clave",
        "innovacion": "Porque es innovadora",
        "grado_madurez_trl": "Grado de madurez (TRL)",
        "casos_referencia": "Casos de referencia",
        "comentarios_analista": "Comentarios del analista",
        "fecha_scouting": "Fecha de scouting",
        "estado_seguimiento": "Estado del seguimiento",
        "queue_status": "queue_status",
        "source": "source",
        "source_url": "source_url",
        "priority": "priority",
        "notes": "notes"
      }
    },
    "rejected_technologies": {
      "description": "Tecnologías rechazadas - USA NOMBRES CON ESPACIOS",
      "note": "Esta tabla usa columnas con espacios y acentos por compatibilidad legacy",
      "fields": {
        "id": "id",
        "original_scouting_id": "original_scouting_id",
        "nombre_tecnologia": "Nombre de la tecnología",
        "rejection_reason": "rejection_reason",
        "rejection_category": "rejection_category"
      }
    }
  },
  "notes": {
    "technologies": "La tabla technologies en BD externa usa snake_case para todas las columnas",
    "scouting_queue": "La tabla scouting_queue usa nombres con espacios y acentos (legacy)",
    "rejected_technologies": "La tabla rejected_technologies usa nombres con espacios y acentos (legacy)",
    "subcategorias": "Es un ARRAY text[], no un string. Usar para sistema de taxonomía 3 niveles.",
    "tipo_id_subcategoria_id": "Campos legacy para compatibilidad. Preferir arrays categorias/tipos/subcategorias."
  }
}
